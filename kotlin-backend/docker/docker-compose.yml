version: '3.8'

services:
  minio:
    image: minio/minio:latest
    container_name: minio_s3_emulator
    # Konfigurieren Sie die Ports für API und Konsole
    ports:
      - "9000:9000" # MinIO API Endpunkt (für Ihre Anwendung)
      - "9001:9001" # MinIO Konsole (Web-Oberfläche)

    # Umgebungsvariablen für Zugangsdaten und automatische Bucket-Erstellung
    environment:
      # --- Zugangsdaten ---
      MINIO_ROOT_USER: minio_admin_user
      MINIO_ROOT_PASSWORD: supersecretpassword123

    # Der Befehl, um MinIO im Server-Modus zu starten und die Konsole zu aktivieren
    command: server /data --console-address ":9001"

    # Persistentes Speichern der Daten
    volumes:
      # Die Daten werden im Volume 'minio_data' auf Ihrem Host gespeichert
      - minio_data:/data

    # Healthcheck, um den Status des Dienstes zu überprüfen
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:9000/minio/health/live"]
      interval: 30s
      timeout: 20s
      retries: 3

# Definiert das Volume für die persistente Speicherung
volumes:
  minio_data: {}